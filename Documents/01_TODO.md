# TODO

## 概要

- 20170407
	とりあえず現状ではチケット管理してないので、このゲームで次に着手すべき項目などをまとめています。


## 20180410 直近の「シンプルな」目標を決めてみる

- まず作る「ゲーム性」は、
	- ランダムに生成されるダンジョンで、
	- ランダムに生成される宝石を10個拾って帰還することが目標。

- 敵を出現させる。
	- 敵モデルはcubeでいい。名札貼るかw
	- roguelikeに動き回らせる。
	- 敵はリスポーンする。

- 左上にキャラクターステータス枠を出す。
	- 顔アイコンくらい描くかなぁ。
	- もちろん無料素材でもOK。

- プレイヤーパーティーは3人。
	- 敵の前ではCTB方式で

- BGMを再生する。
	- 起動時オプションとする。不要なら読み込まない。

- タイトル画面を作る。
	- ゲームオーバー画面を作る。
	- UIの基本的な遷移の実装が必要なはずだ。洗い出す。

- ゲーム設定は可能な限りマスターデータに逃す。
	- BGMファイル名
	- 壁テクスチャ名
	- マップサイズ
	- etc...

- ちょっとリアルタイム性を作ってもいいかもなぁ。
	- すごく思ってるのが、このUI、今ヒリヒリするような「逃げるゲーム」にできそうな**すごい期待**があるんだよなぁ……。
	- 試しに「1秒ごとに敵が動く」くらいのリアルタイムから初めてみるかなぁ。自分は体力を気にせずに歩き回れる感じで……いや、体力は設定すべきかな。「はぁはぁ」言わせたい。


## 基本的なところ

- ドラッグの感度がピクセルなのは良くない気がする
	- どんなサイズの端末でも、画面表示に対応する操作感にしたい。

- 今は画面の縦サイズを維持してカメラがスケールしているので、縦解像度でピクセルを割れば端末異存がないのではと思う。
	- ※この判断は、大画面PCでは大きなマウス操作が必要になる、という判断。
		- 考え方次第では、「setPixelRatio」に渡す引数「devicePixelRatio」をみても良さそう。
			- これを使えば、iPadでもiPhoneでもスワイプサイズは同等……という操作性を維持できる？
			- iPadないからなぁ。
		- これはまあ`後日検討`で別項目にして問題ないかと。スクラムだと後回しストーリーにする感じ。
		- 理解が早い方に寄せる判断とも言える。

- デプロイ周り
	- npm run deployで毎回assetsをアップし直してるのが気になる……。exact-timestamps外しても一緒か。。
		- 不要な更新はできれば避けたい。この辺は規模が大きくなるまでは無視して良さそうだけど。

- stats.js導入
	- https://github.com/mrdoob/stats.js
	- プロファイラは早めに導入しておきたい。
	- http://tmlife.net/programming/javascript/lasted-stats-js-usage.html
	- あ、これMr.doobの作品なんだw AS3でもお世話になったなぁ……。

- UIの作成方法を検討していく

- 手馴しにNRogueのコードを移植していく

- ゲームとしての体裁を整える
	- とりあえずRPGではなくゴール探すだけのゲームにするかな……。

- BGM
	- mp3でもいいんだけど、Web Audio APIでシンセサイズ+MML再生とか試して見たいかなぁ。
		- ダウンロードマネージャとか作りたくない。

- 3Dゲームの地盤としてのライブラリ整備

- Blenderモデルを読み込ませてみる
	- フロアギミック作るのに重要。あと、階段くらいはモデル作りたい。
	- [3Dデータ(Blender)をThree.jsで表示するまでの方法](https://liginc.co.jp/331430)
		- liginc。助かる。
		- blenderは最新版を落としておくか。


### b-wiz(Like a bird in a cage) - 完成目標を決める

- サウンド再生
	- ダウンロード、ローカルキャッシュ化

- マスターデータ整備
	- ダウンロード
	- 固定マップ実装

- キャラクターステータス表示実装
	- UI
	- 内部システム（context？）

- メッセージシステム実装
	- UI

- エンカウントバトルの実装
	- バトルダイアログと

- アウトゲーム要素、特に「面白いインベントリ」を検討する。
	- https://s3-ap-northeast-1.amazonaws.com/b10f/webgl/index.html
	- 微妙なゲームだけどちゃんとインベントリを設計しているのは素晴らしい。
	- インベントリはUI並びにマスターデータ設計の悩みどころでもある。
	- 「汎用的なインベントリ」を考えて見たい。別枠で。


### やってること、今後やりたいこと

- **DONE** GameBasicTest  - メッセージドリブンによるゲーム設計のテストプロジェクト。旧名YAGE。
	- これは完了扱いでいいと思う。メッセージドリブンとルール処理方法が固まった。
	- 独立最小構成のテストになったと思うので、実際に

- `PROGRESS` SkillSystemTest - スキルとはなにか？ 部分検証プロジェクト。
	- 回避率のテストまでしっかり片付ける
	- モンスタータイプを追加して挙動テストを進めたい。
	- ユニットテストまでやりたいところだなぁ……。これだけ単品で独立させておきたい。

- `WIP` webGlTest - 元も子もない名前だなぁ。整形して3Dダンジョンうろつくゲームにしたい。
	- 言うなれば「開発物本体」だ。
		- 単体テストが必要なものもありそうだけど、ごちゃ混ぜにしてるケースもあり。

- `PROGRESS` 迷路生成。
	- 棒倒しはできた。

- `PROGRESS` UI基本テスト
	- まあ、形になりそうかな。flexboxで想定した表現はできそうな雰囲気。

	- 9sliceなどの素材はないかな。
		- https://www.gettyimages.co.jp/detail/%E3%82%A4%E3%83%A9%E3%82%B9%E3%83%88/frames-%E3%83%AD%E3%82%A4%E3%83%A4%E3%83%AA%E3%83%86%E3%82%A3%E3%83%95%E3%83%AA%E3%83%BC%E3%81%AE%E3%82%A4%E3%83%A9%E3%82%B9%E3%83%88/165681515
			- たけえ。なんだこれ。雰囲気はこの路線にしたいけど。

	- できれば**tween**などアニメーションもまとめて検討したい。CSSアニメーションをjavascriptで設定することになるんだろうか……？
		- https://www.willstyle.co.jp/blog/1173/
		- https://github.com/juliangarnier/anime
		- anime.js。なんでもできそうだな。anime.min.jsで14.1kb足らずなので、どのみちTHREE.js使ってゲーム作るなら入れちゃっていいかも。
		- CSSアニメは状況次第でGPUが利用されるとのこと。
			- https://iwb.jp/chrome-safari-gpu-css-animation-check/
			- この辺の知識も抑えたいかなぁ。深入りしないほうがいいかな。

	- Simple Tweenという古めの実装を参考に、ライセンスクリアなライブラリを自作する方向で検討中。
		- Tween Typeは一般的じゃなくても良い。むしろTween事例の参考ページにでもリンク貼っておけば十分という考え。
		- 多分Transform.translate/scaleとalphaを制御できればUI要件は満たすと思うんだけども。
		- DoTween同様に「From」が欲しいな。


- `TODO` masterDataTest - サウンド、画像、jsonそれぞれをタイムスタンプで差分更新できることを確かめるプロジェクト。未着手。

- `TODO` EnemyAI Test - 敵AIの設計を考える。バトルシステムの延長で考えないといけないかなぁ。
	- 敵同士の戦いを試すことになるのかな。

- `TODO` Save & Load Test - サーバ保存も含めて試しておきたい。
	- jsonにしてspeck暗号かけてWebStorage保存。
	- エディタとかにコピペできるように、base64入力フォーム作ってもいいかなぁ。

- `TODO` Server Test
	- APIゲームの礎を、改めてTypeScript Lambda+DynamoDBで設計したいなぁ。
	- ただ、どうしてもRDBが必要なんだよなぁ……。ここはもう仕方ないと思うのだけど。
		- RDSは高いので、SQLiteでも自宅サーバ運用してお茶を濁すかねぇ。性能は出ないだろうけど、本格的なリリースするまでのテストならSQLite程度でいいんじゃないかなーと。
		- もちろんDocker運用にしておけば、最悪メンテナンスでEC2+MySQLに移行とかも考えられるだろう。


### 将来的なTODO

- InDeviceLog

- DI
	- ちょうどUnityのZenjectを某社でやってるので、似たような設計ができるものがあると嬉しい。
	- ……これ、個人開発ならコンストラクタインジェクションを徹底すればいいだけかも……。



### 他のゲーム調査

- 20180408日曜日
	- **wiz BUSIN**のプレイ動画
		- https://www.youtube.com/watch?v=wnRgjGELSio
		- UIが非常に考えられている。エクストラダンジョンで50Fとかあるんだな。wizライクゲームのしっかりしたアレンジ版をやりたいならばこういうゲームをすでに通っているということを意識する必要がある。
		- CAGEはどこまでいっても「ライト版」として味付けしないといけないな。
		- 魔法はレベル回数制だ。

	- **サターン版「リルガミンサーガ」**
		- https://www.youtube.com/watch?v=4-fB-E5ggT8
		- 本家のアレンジとしてポリゴンダンジョンがすでにあったんだなぁ。
		- UIはFC版/PC版と大差ないのかな。まあ、そこ変えちゃあかんやつか。（宿システムとか手間だけどそれがwizだしなぁ）
		- BG、グラフィックスはきっちり凝ってるな。
			- 音楽が若干気にくわないw 先頭勝利ファンファーレが微妙。
		- ダンジョンはすごく綺麗で、オブジェクトも作り込まれてる。扉も柱もあるし天井にはシャンデリアがあったりするんだな。
		- 画角が思いの外……道の幅が広い？ 3Dで横長画面にするにはこうしないといかんってことかなぁ。
			- この画角の表現は参考になるかも。
				- 「自分の左右が道か壁かわかる状態」にするためには、単純にblock sizeを小さくすればいいのかな。
					- 画角設定を修正しても、見えてないものは見えてない感じだしw 


`EOF`
# System00_システムアイデアメモ


## 概要

- 思いついたシステムはここに書く
- 仕様としてまとめる段になったらファイル分ける


### b-wiz インベントリ・強化システムの検討

- まずこれはゲーム本体とは分けた形で、プロジェクトにしたほうが良さそう。
- 下部ボタンUIは覆い隠したほうがいいだろう。
	- 情報が十分で、かつタッチ操作可能なインベントリが望ましい。
- 以前どこかで検討した「expもgoldもユーザが所有している要素は一律インベントリで考える」というアイデアを軸に、少し検討を進めていきたい。

- まずUIか……。これはフリーハンドでいくつか書いてからだろうなぁ。

- まずイメージ。
	- `いつも何かが足りていない`
		- プリコネの成長は必ず何か「足りないものを探しに行く」作業だ。
		- 行動力、素材、そしてマナ。何一つ飽和状態の「ゲーム中素材」はないように見える。（低レベル素材が余ってるかな……？）
		- そのために石を割って行動力を増やし、獲得機会を増やしているようなもんだ。

- `「MENU」で扱う内容を考える`
	- ダンジョン内利用可能アイテムの利用: ポーション、松明
	- 魔法の発動

- `「帰還SHOP」で扱う内容を考える`
	- ダンジョンから死なずに戻るとデスペナルティなしに素材を持ち帰れる仕様で考えてみる。
	- ゲーム中のショップは「合成屋」


### 基本ゲームシステム案

- 「マップ範囲」の定義
	- 狭いマップ（辛くない）、普通の「辛さ」のマップ、広いマップ（意図的に辛くしてる）……色々あるだろう。
	- 基準の一つは、ジェムで購入できる「探索の巻物」。
		- 「辛い」と思う単位を、この巻物で一網打尽にできる。そのラインはどこだろうか。
		- ……言ってしまえば、「最小かな？」と感じてる7x7でも罠に寄っては辛くなる。テレポーターあると覚えられるんだろうか……？

- 「マップギミック」の案出し

	- 小手際だけど検討の影響範囲が非常に広い！

	- `落とし穴`
		- 一つ下の階に落ちる。当然マップはない。敵も強い。帰りたい。
			- この一連の流れ自体は崩さない方向で。
			- もちろん一つ下の階の敵次第では同バランス内に止める検討の余地はあるのだけども……。自動生成で大丈夫だろうか？
				- 仮に「十分に育てないと一つ下の階には降りられないバランス」を作るのであれば、これは危険すぎるトラップになる。
				- 仮に「3階単位で『十分に育てないと危険』」という単位を区切るのであれば、考えようはあるかな……。
			- ……ふむ。**これ、やるなら一括して2階単位か？**
				- 奇数フロアでは落とし穴を活用できる。
				- 偶数フロアでは滅多に落とし穴はない。
				- 単位が上がるときは「禍々しい気配がする。降りますか？」というようなメッセージで担保できないだろうか。


	- `ダークゾーン`
		- 安易だと思う。表現次第か？
		- メッセージ: `照明が暗くなる魔法があるようだ。`
		- 汎用で行けると思う。強制ライトも強制1マス表示も自由自在。
		- 汎用化に寄せたい。
			- 「固定照明か否か」
			- 「何も見えないのか否か」
			- ……うーん。これくらいなの？

	- `実は通れる壁`
		- サーチ仕様を検討したいけど、実現がラクなのでなんとかしたいな。
		- 魔力が十分あれば「たまにぼやけて見えるエフェクト」を足すとか？
		- うーん、それで考えたのが右上バーとかで「ターン時間」を表現するやつかなぁ。別項目で。

- `時間経過`
	- このゲームでは、一定時間経つと「ターン消費」を行いたい。


### ゲームシステム案

- `超広大ワンフロア`案

	- 「1フロアが広大すぎるけど、地下に降りる分には直近の24x24マス内で必ず発見できる」というのはどうか。
		- フロアが縦に横にと繋がってるイメージ。
			- `クリアに必要なフロアではない`ということは、どこかであらかじめ記載が必要だろう。
			- カギの入手が必要、という設計もありか。
		- 縦横は何かと言うと、「ほんの少しだけ敵が強くなった探索領域」。
			- で、これが乱数シード値で決定されるので、savableであり、かつ量産可能。
				- プレイヤーの見た目には一つの階が異常に広い、という認識になる。
				- 25x25程度のダンジョンが、一つの階で最大256x256あるとしたらどうか。もちろん、時間をかければ踏破可能。

	- 横方向の探索は、あくまで先に進めない時に「やれること」として提供。
		- たまにはレベル相応のボーナスマップも出現するので、探索し続ければ間違いなく次のレベルに挑めるようになる。
		- 地下に降りないことには、`獲得できるものの桁はあまり変わらない`。
		- `疑問点` このバランスの場合、体力システムの導入はどうなんだろう。

	- 「やることが尽きない」を目標に。

- `WIZから検討すること`
	- 「宝箱の罠、解錠・解呪」
	- 一大ゲーム性を持ち込みたいw
	- ゲームターンは進行してしまうので、モンスターエンカウントが怖いのであれば後述の「魔法陣」を使わなければいけない。（回復もしたい）

- ``

### インベントリ・強化システムから分けて考える点

- アミュレット効果のアイデア
	- 課金で育てるのはこれ！
	- ゲームタイトルを「Amulet of tears」にしても良いかも。
	- 後述、「主人公たちは特殊なアミュレットを埋め込まれた土塊」という設定から考えたい。

- `妖精`
	- この世界では、妖精はマナでしかなく、消費アイテムであり、マナに変換可能なアイテム。
		- ただし、保存のためには対応するキャパシティの魔法筒が必要。
	- 「濃厚なマナの集合はこの姿を取ることがある。ーーつまりこれはマナでしかない。意思を持たず、もちろん人格も持たない。小さな人型で飛び周り、友好的なこともあるが概ね敵対的だ。アミュレットの効果を与えて霧散し、マナに還る。魔法筒があれば保存できる。やってみるか？」

	- 消費アイテム。

- ゲーム内通過のアイデア

	- `コイン`
		- 課金動線から切り離して考える通貨。
		- プリコネでいうと「ルピ」。家具購入などゲームに関係の弱いところでのみ消費できる。
			- でもゲーム素材の生産家具があるか……。これ、企画的な糸が読みきれないな……。
		- bwizでは、`ユーザのプレイアビリティを一時的に助ける`アイテムの購入用と考える。
			- つまり**レアリティの高い武器は買えない**。
			- **照明**、**コンパス**。
		- 後述の`ジェム`でもコインを購入できる。かなり多く。

	- `ジェム`
		- 課金対象アイテム。
		- bwizでは`ガチャ`は考えない。（個人製作なので、`ルートボックスはギャンブル、という世界的な兆候に乗った検討を行う`。まあ、国内ではビジネスとしてのガチャシステムは当面排除できないと思うけど……。。）
		- 「月額優遇」課金
			- 帰還ショップでの扱い向上（内容は要検討）
			- ゲームモード別での挑戦回数アップ

- 消費アイテムのアイデア

	- このゲームではマップは初期表示なし＋オートマッピングで考える。
		- 

	- **照明** 「松明」「ランプ」
		- ゲーム補助。ログインボーナスで渡して良い。

	- **コンパス**
		- 現在位置と方向を表示。
		- 一定ターン数で壊れる。
		- 未踏部分についてはオートマッピング進捗で問題ないが、帰還時はマッピングについては記憶が必要になる。

	- **探索の巻物**
		- `10ジェムで購入可能`。マップを16x16範囲で出してしまう。
		- あまりに時短に

	- **退魔の護符**
		- 体力の休憩アイテムであり、**宝箱の解錠**中にモンスターエンカウントを退けるためにも重要。移動すると効力が消える。
			- 休憩は下部ボタンでできる。
			- 「後ろを向く」ボタンを消して、コンテキストに応じたactionボタンにしようと思う。
		- 僧侶の魔法でも初期魔法に「魔法陣」がある。





### bwiz ランクマッチとランキング

- 10F以降は「他のプレイヤーパーティー」ともエンカウントする。
	- プレイヤーが新しい階に入った瞬間のスナップショットを記録する。
	- 強敵のバリエーションを作りたい。
	- ただし、+1でレベルキャップはつける（＝レベルアップステータスは計算可能とする）
		- レアアミュレット持ちにはどうしても適わなくなる。


### cage オフラインモードの検討

- 20180407
	- service workerの動きを把握したい。`リソースの事前ダウンロード`と`オフラインモード`の2点の検討が必要で、後者については当面着手できないと思う。（APIゲームになるので話が大きくなる。。）

	- リソースの事前ダウンロードを行いたい。

		- webストレージに保存しておく

		- 事前ダウンロードが完了していないとオフライン起動はできないように。
			- この場合、最小限ダウンロードされた状態になっていると思うのだけどどうなるんだろ。

		- オンラインじゃないとリソースチェックに行けないけど、**最新版マスターデータを維持させたい場合**をどう考えたらいいんだろうなぁ……。

	- 以下は`オンラインモードのゲーム内容`が固まらないと意味がない検討。
		- オフライン時にはオフラインモードになり、オンラインインゲーム中は「タイトルに戻るかリトライするか」を選ばせたい。

```
******      ****    **      **    ******  ********    ****    **      **  
**    **  **    **  ****    **  **        **        **    **  ****    **  
**    **  ********  **  **  **  **  ****  ********  **    **  **  **  **  
**    **  **    **  **    ****  **    **  **        **    **  **    ****  
******    **    **  **      **    ****    ********    ****    **      **  
```

### ダンジョンギミックの検討など

- 20180407
	- まずはアイデア出し。

	- `方向転換`
		- wizにあった。
		- `無音`
			- 十字路でこれをやられると辛いやつ。
			- スキルで検出。
		- `演出付き`
			- 単純にその方向に回る。


	- `ワープゾーン系`
		- wizにあった。
		- `一方向ワープ`
			- 一瞬で3Dシーンが変わる
			- 地形の違いに気づくか、オートマッピングを見ていないとわからないことになる。
		- `演出付きワープ`
			- ワープしたことがわかる。
			- スキル次第で、一方行ワープの検出時にこの演出にも。


	- `ダークゾーン系`
		- wizにあった。
		- `視界低減`
			- 視界が現在の明かりレベルよりも一段階減らされる。
		- `完全ダーク`
			- 真っ暗。画面中央に表示は必要か。
			- 音とメッセージ「いてっ！」だけで判断する必要がある。


	- `魔法禁止ゾーン`
		- 魔法前提の先頭ができない。
		- 回復も使えない。リソース管理に検討が必要となる。


	- `回復ゾーン`
		- ターン消費、休憩できる


```
**      **    ****      ******  **    ****    
****  ****  **    **  **        **  **    **  
**  **  **  ********  **  ****  **  **        
**      **  **    **  **    **  **  **    **  
**      **  **    **    ****    **    ****    
```


### どんな「魔法」があると最小限遊べるか

- wiz同様、「帰還を繰り返すゲーム」にしたいので、回復魔法切れが重要な要素になる。

	- http://chrisnk.la.coocan.jp/games/wizspells.html
	- レベル別回数制覇どうなんだろうなぁ。
		- バランス調整には良いかも。wizって全レベル最大9回だっけ？
	- GBC版では


### 「ロングスペル」「魔法陣」

- 20180407 良さそう？

新規プレイヤーが初プレイ中でも納得しやすく、わかりやすい「大魔法」のルールを検討する。

- `ロングスペル`とは、単純に発動までに時間がかかるもの。
	- 丁寧にメッセージウインドウに詠唱経過を綴る。
		- ユーザは「メッセージ内容を覚えたら発動までの待ち時間がわからないでもない」というやつ。大ボス用。
		- 消費MP自体は少なくて良いと思う。
			- ロングスペル「全体ヒール」が平均3ターンかかるのに、消費MPが多いのはまずい。
			- `検討` ロングスペルは「周囲のエレメンタルの加護」を得ているのでフィールド効果に強く左右される……と、面白いかも。バランス難しくなるかなぁ。
				- `考察` ゲーム用語で、大魔法は全て「エレメンタルヒール」のように「エレメンタル」とつくとか。
		- **難点?** これはマスターデータ泣かせかなぁ……。


- `魔法陣`とは
	- ロングスペルと対で導入したいやつ。
	- ゲーム中、魔法陣を作らずに攻撃されると`スペルがキャンセルされる`という導入を行う。
	- 魔法陣を作るのは0.5ターン。攻撃で魔法陣が消えてしまい、ダメージも食らうが、最初から利用可能な魔法陣では`ダメージは食らうがスペルはキャンセルされない`という状態になる。


- このシステムセットから、「大魔術師」をプレイヤーパーティーに入れた「2人パーティー」というゲーム性を想像できる。
	- 前衛、後衛。ペアというと、一応「chaos rings(ケイオスリングス)」がそのシステムだったな。
	
- 「前衛は、強力な魔法が完成するまで壁になって守り続ける」というゲーム性を演出可能かもしれない。


### b-wiz 魔法システムのアイデア

- 20180407 良さそう？

- 状況で使える魔法、というアイデア。
	- 「小石の雨」
		- 砂利道で使える魔法。
			- 敵に物理ダメージ、超複数回攻撃のため回避率が高い敵も倒しやすい
		- `導入意図`
			- 魔法のバリエーション確保。
				- ある程度マスターデータとシステムで半自動的にバリエーションを増やせる。
			- 効く、効かないの前に自明な「使える、使えない」状況の判断・誘導をユーザに行わせる。

- 「エレメンタル」MPと「消費効率」による魔法習得
	- 何かと言うと、MPの領域を8つくらいに分類してしまうということ。
	- 「火のMP」が30で、「ファイヤーボール」の消費MPマスターが10、Lv2なら9で使える。
	- 「回復の魔法」は、「水、土、風」を全て1ずつ、「生命」を10消費する……など。
	- 魔法効果は僧侶が使っても魔法使いが使っても、基本は変わらない。アミュレットで強化することができる。


### 20180324土曜日 b-wizの通信ゲーム化の検討「インゲーム側にランダムキーを送り、選択した行動を検証する」

- インゲームの改造攻撃の対策方法を考える。
	- 仮に、ゲームの仕様は以下とする。
		- インゲーム参入API実行時に、256バイトの暗号シードを受け取る
			- メルセンヌツイスタなど、再現性のある一般的な乱数ロジックをサーバとクライアントで共有。
			- このシードを所定のルールで使いまわす。（ビットシフトとか部分利用とか？）
		- インゲーム完了APIで、プレイヤーが取った全ての行動ログをサーバに送る
			- `要検討: このサイズが現実的かどうか検証`
			- もしくはハッシュを送る？この場合は
		- 完了API受信側は、再現性を確認して報酬を決定する。

```
  ****    **        ******    
**    **  **        **    **  
**    **  **        **    **  
**    **  **        **    **  
  ****    ********  ******    
```

## OLD: 使わなさそうなアイデアの退避場所


`EOF`